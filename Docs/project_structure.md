# Project Structure – Rules-generator

## Root Directory Layout
```text
rules-generator/
├── apps/
│   ├── frontend/          # Next.js (App Router)
│   │   ├── app/           # Route segments, layouts, pages
│   │   ├── components/    # Shared React components
│   │   ├── features/      # Feature modules (auth, generation, library)
│   │   ├── hooks/         # React hooks
│   │   ├── lib/           # Client utilities (supabase client, fetchers)
│   │   ├── styles/        # Global CSS, Tailwind config
│   │   └── public/        # Static assets
│   └── backend/           # FastAPI + LangGraph service
│       ├── app/
│       │   ├── api/       # FastAPI routers
│       │   ├── agents/    # Agent implementations
│       │   ├── core/      # LangGraph graphs, prompts, tools
│       │   ├── db/        # Database access layer
│       │   ├── schemas/   # Pydantic models
│       │   └── services/  # Business logic helpers
│       ├── tests/         # Unit tests
│       ├── Dockerfile
│       └── requirements.txt
├── packages/
│   ├── ui/                # Shared component library (shadcn-based)
│   └── config/            # Shared ESLint, Prettier configs
├── infra/
│   ├── env/               # Example `.env` files
│   └── scripts/           # Dev/CI helper scripts
├── docs/                  # Generated public documentation site
├── .github/
│   ├── workflows/         # CI/CD workflows
│   └── ISSUE_TEMPLATE/
├── docker-compose.yml
├── README.md
└── LICENSE
```

## Detailed Structure
- **apps/frontend/** – Front-end codebase. Uses Next.js App Router. Split by:
  - `components/` – Pure UI components (stateless, styled via Tailwind).
  - `features/` – Feature-oriented slices combining UI, hooks, state, and API calls.
  - `hooks/` – Reusable React hooks (authentication, fetcher, viewport, etc.).
  - `lib/` – Client-side utilities such as the configured Supabase client, API helpers, and analytics.
  - `styles/` – Global CSS (generated by Tailwind), theme tokens, fonts.
  - `public/` – Static assets served directly by Next.js.

- **apps/backend/** – Python backend service.*
  - `app/api/` – FastAPI routers exposing REST & SSE endpoints.
  - `app/agents/` – Implementation of Supervisor, FolderStructure, Visualization, Rules & Configs, Review agents.
  - `app/core/` – LangGraph graphs, prompt templates, and utility functions.
  - `app/db/` – Database access layer using PostgREST or `asyncpg` for Supabase Postgres.
  - `app/schemas/` – Pydantic models for request/response validation.
  - `app/services/` – Business logic helpers, file upload utilities.
  - `tests/` – PyTest unit tests.
  - `Dockerfile` – Production image for deployment.

- **packages/ui/** – Shared shadcn/ui component library compiled to ESM; published locally for apps.
- **packages/config/** – Base ESLint, Prettier, and Stylelint configs consumed via `@rules-generator/eslint-config`.
- **infra/** – Infrastructure utilities.
  - `env/` contains `.env.example` and per-environment templates.
  - `scripts/` includes DB migration scripts, data seeding, and helper scripts executed in CI/CD.

- **docs/** – Docusaurus site built from `/Docs` and additional markdown files for public consumption.
- **.github/workflows/** – GitHub Actions automation: lint -> test -> build -> deploy.
- **docker-compose.yml** – Local orchestration of Postgres, Supabase emulator, and backend.

## Configuration File Locations
- `apps/frontend/tailwind.config.ts` – Tailwind custom theme tokens.
- `packages/config/eslint-next.js` – ESLint rules targeting Next.js.
- `apps/backend/.env` – Backend environment variables (database URL, OpenAI key).
- `supabase/migrations/` – SQL migrations version-controlled via Supabase CLI.

## Build & Deployment Flow
1. **Frontend**
   - Build command: `pnpm --filter frontend build` (Next.js static generation + edge functions).
   - Deploy to Vercel via automatic GitHub integration.
2. **Backend**
   - Docker image built from `apps/backend/Dockerfile`.
   - Pushed to Fly.io or Render on merge to `main` using GitHub Actions.
3. **Database Migrations**
   - Supabase migrations executed in CI prior to backend deployment.

## Environment-Specific Configurations
- **Local Development** – `docker-compose` spins up Postgres and Supabase emulator; `.env.local` files loaded by apps.
- **Staging & Production** – Secrets stored in GitHub Actions and Vercel/Fly.io dashboard; config values injected at build time.
